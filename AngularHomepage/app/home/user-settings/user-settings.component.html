 <!-- Navbar -->
<navbar-home [invitations]="invitations" [invitationNotifications]="invitationNotifications"></navbar-home>

<!-- Kontoinställningar -->

<section id="user-settings" class="col-12 card">
    <div class="col-sm-12 justify-content-center">
        <div class="section-content">
            <div class="container">
                <div class="row justify-content-center">
                    <div class="list-group list-group-flush w-100">

                        <div *ngIf="!editActive">
                            <div class="list-group-item">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="user-settings-title">Mailadress:</strong>
                                        <ng-container>{{currentUser.Email}}</ng-container>
                                    </div>
                                </div>
                            </div>

                            <div class="list-group-item">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="user-settings-title">Lösenord:</strong>
                                        <ng-container>******</ng-container>
                                    </div>
                                </div>
                            </div>

                            <div class="list-group-item">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="user-settings-title">Mobilnummer:</strong>
                                        <ng-container>{{currentUser.PhoneMobile}}</ng-container>
                                    </div>
                                </div>
                            </div>

                            <div class="list-group-item">
                                <div class="row">
                                    <div class="col-12">
                                        <strong class="user-settings-title">Adress:</strong> {{currentUser.Address}}, {{currentUser.PostalCode}}
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="col-6 p-3">
                                    <div (click)="editActive=true" class="btn btn-primary text-white" role="button">
                                        Redigera kontouppgifter
                                    </div>
                                </div>
                            </div>

                        </div>


                        <div *ngIf="editActive">
                            <form name="form" (ngSubmit)="f.form.valid && password.value == confirmPassword.value && updateAccount()" #f="ngForm">
                                <div class="form-group list-group-item" [ngClass]="{ 'has-error': f.submitted && !email.valid }">
                                    <strong class="user-settings-title">Mailadress:</strong>
                                    <input type="text" class="form-control col-12 col-md-6" name="email" [(ngModel)]="currentUser.Email" #email="ngModel" placeholder="{{currentUser.Email}}"/>
                                    <div *ngIf="f.submitted && !email.valid" class="help-block">Fyll i giltig e-post</div>
                                </div>
                                <div class="list-group-item">
                                    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && !password.valid }">
                                        <strong class="user-settings-title">Lösenord:</strong>
                                        <input type="password" class="form-control col-12 col-md-6" name="password" [(ngModel)]="currentUser.Password" #password="ngModel" />
                                        <div *ngIf="f.submitted && !password.valid" class="help-block">Fyll i lösenord</div>
                                    </div>
                                    <div class="form-group" [ngClass]="{ 'has-error': f.submitted && password.value !== confirmPassword.value}">
                                        <strong class="user-settings-title">Bekräfta lösenord:</strong>
                                        <input type="password" class="form-control col-12 col-md-6" name="confirmPassword" [(ngModel)]="currentUser.ConfirmPassword" #confirmPassword="ngModel" />
                                        <div *ngIf="f.submitted && password.value !== confirmPassword.value" class="help-block">Lösenorden matchar inte</div>
                                    </div>
                                </div>
                                <div class="form-group list-group-item" [ngClass]="{ 'has-error': f.submitted && !phoneMobile.valid }">
                                    <strong class="user-settings-title">Mobilnummer:</strong>
                                    <input type="text" class="form-control col-12 col-md-6" name="phoneMobile" [(ngModel)]="currentUser.PhoneMobile" #phoneMobile="ngModel" placeholder="{{currentUser.PhoneMobile}}" />
                                    <div *ngIf="f.submitted && !phoneMobile.valid" class="help-block">Fyll i giltigt mobilnummer</div>
                                </div>
                                <div class="form-group list-group-item">
                                    <strong class="user-settings-title">Adress:</strong>
                                    <input type="text" class="form-control col-12 col-md-6 " name="adress" value="{{currentUser.Address}}, {{currentUser.PostalCode}}" disabled/>
                                </div>
                                <div class="form-group row">
                                    <div class="col-6 p-3">
                                        <button class="btn btn-primary text-white" role="button">
                                            Spara ändringar
                                        </button>
                                    </div>
                                    <div class="col-6 p-3 text-right">
                                        <div *ngIf="editActive" (click)="editActive=false" class="btn btn-outline-primary" role="button">
                                            Avbryt
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</section>